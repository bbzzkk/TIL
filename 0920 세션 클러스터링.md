# 세션 클러스터링

### 무엇인가요?

WAS 서버간 세션 공유

### 왜 필요하나요?

HTTP 프로토콜은  **Connectionless**하고 **Stateless**하다는 특징이 있다.

하지만 **로그인 상태 유지**를 하기 위해서는 **Stateful**해야 한다. 이는 **Session** 또는 **Cookie**기능으로 해결할 수 있다.

만약 로그인 세션을 관리하는 WAS가 1대였는데 서비스를 이용하는 사람들이 늘어나 WAS를 여러대 증설하고 로드밸런서를 설치했다면? WAS는 독립적으로 세션을 관리하기 때문에 다른 WAS와 세션이 공유 되지 않는다.

로드밸런서에 로그인 요청이 들어와 **WAS 'A'**에서 로그인 처리를 하여 세션을 유지했다고 하자. 서비스 이용자 길동이는 분명히 로그인을 했다. 해당 사용자가 로그인을 해야지만 이용할 수 있는 서비스를 사용하고 싶다. 해당 서비스는 **WAS 'B'**에서 관리하고 있을 때  **WAS 'B'** 에는 길동이 로그인 세션 권한이 인가되어 있지 않아 서비스를 사용할 수 없다. 즉, 올바르지 않게 작동하는 것이다.

### 어떻게 할 수 있나요?

- WAS의 설정 파일에 IP와 Port정보 등록

- Redis 와 Spring Session을 사용하여 Auto Scale이 되었을 때 세션 클러스터링 자동화